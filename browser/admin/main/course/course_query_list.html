<div class="body-in" id="top" style="width: 98%;">
	<div class="layui-row body-head-in">
		<div class="layui-col-xs3">
			<h2> 课程信息表 </h2></div>
		<div class="layui-col-xs3">
			<form class="layui-form" action="">
				<div class="layui-inline">
					<div class="layui-input-inline">
						<select name="modules" lay-verify="required" lay-search="">
							<option value="1">实训中心</option>
							<option value="2">艺术中心</option>
							<option value="3">恒大名都</option>
						</select>
					</div>
				</div>
			</form>
		</div>
		<div class="layui-col-xs3">&nbsp;</div>
		<div class="layui-col-xs3" align="right">
			<h4><a href="#22" class="lz-font-color-blue">+添加课程</a></h4></div>
	</div>
	<div class="body-in" style="width: 95%;">
		<table class="layui-hide" id="test" lay-filter="demo" lay-data="{id: 'imgs_col'}"></table>
	</div>
</div>

<script>
	//JavaScript代码区域
	layui.use('element', function() {
		var element = layui.element;

	});
</script>
<script>
	layui.use('table', function() {
		var table = layui.table;

		table.render({
			elem: '#test',
			url: '../../json/course.json',
			dataType: 'jsonp',
			skin: 'nob',
			cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
				,
			id: 'table-content',
			cols: [
				[{
					field: 'courseid',
					width: '11%',
					title: '课程编号',
					sort: true
				}, {
					field: 'coursename',
					width: '21%',
					title: '课程名称'
				}, {
					width: '16%',
					field: 'courseimg',
					title: '课程图片',
					templet: '#imgTpl'
				}, {
					field: 'courseprice',
					width: '11%',
					title: '课程价钱',
					sort: true
				}, {
					field: 'coursecategory',
					width: '11%',
					title: '课程类别',
					sort: true
				}, {
					field: 'branch',
					width: '11%',
					title: '所在分部'
				}, {
					width: '19%',
					align: 'center',
					toolbar: '#barDemo'
				}]
			],
			page: true
//			success: function() {
//				layui.use('layer', function() {
//					var layer = layui.layer;
//					layer.photos({
//						photos: '#imgs',
//						anim: 5 //0-6的选择，指定弹出图片动画类型，默认随机（请注意，3.0之前的版本用shift参数）
//					});
//				});
//			}
		});
	});

</script>

<script id="barDemo" type="text/html">
	<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
	<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
	<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script id="imgTpl" type="text/html">
	<div id="img_course"><img src="{{ d.courseimg }}"></div>
</script>
<script>
	layui.use('table', function() {
		var table = layui.table;
		//监听表格复选框选择
		table.on('checkbox(demo)', function(obj) {
			console.log(obj)
		});
		//监听工具条
		table.on('tool(demo)', function(obj) {
			var data = obj.data;
			if(obj.event === 'detail') {
				//						layer.msg('ID：' + data.id + ' 的查看操作'); //在这里跳入查看界面
				if(data.courseprice == "-") {
					window.location.href = "#25";
				} else {
					window.location.href = "#26";
				}

			} else if(obj.event === 'del') {
				layer.confirm('真的删除行么', function(index) {
					obj.del();
					layer.close(index);
				});
			} else if(obj.event === 'edit') {
				//						layer.msg('编辑行：<br>' + JSON.stringify(data)) //在这里跳入编辑界面
				if(data.courseprice == "-") {
					window.location.href = "#23";
				} else {
					window.location.href = "#24";
				}
			}
		});

		var active = {
				getCheckData: function() { //获取选中数据
					var checkStatus = table.checkStatus('idTest'),
						data = checkStatus.data;
					layer.alert(JSON.stringify(data));
				},
				getCheckLength: function() { //获取选中数目
					var checkStatus = table.checkStatus('idTest'),
						data = checkStatus.data;
					layer.msg('选中了：' + data.length + ' 个');
				},
				isAll: function() { //验证是否全选
					var checkStatus = table.checkStatus('idTest');
					layer.msg(checkStatus.isAll ? '全选' : '未全选')
				}
			};

		$('.demoTable .layui-btn').on('click', function() {
			var type = $(this).data('type');
			active[type] ? active[type].call(this) : '';
		});
	});
	$(function() {
		//				$("img").click(function(){
		//					var _this = $(this);//将当前的pimg元素作为_this传入函数
		//					imgShow("#outerdiv", "#innerdiv", "#bigimg", _this);
		//				});
		layui.use('layer', function() {
			var layer = layui.layer;
//			// 	layer.msg("hhh");
			layer.photos({
				photos: '#img_course',
				anim: 2 //0-6的选择，指定弹出图片动画类型，默认随机（请注意，3.0之前的版本用shift参数）
			});
//
		});
	});
</script>